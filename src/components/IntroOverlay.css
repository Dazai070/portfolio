/* ═══════════════════════════════════════════════════════════
   MALEVOLENT SHRINE — Sukuna trace + scattered slashes
   5.0s total:
   0.0-1.8s Scattered mini-slashes & Main slashes wave 1-3
   1.5s  Final decisive strikes
   2.4s  Red seam glows at center
   2.7s  Screen RIPS apart
   4.0s  Overlay fades
═══════════════════════════════════════════════════════════ */

/* ── Base overlay ─────────────────────────────────────────── */
.intro-overlay {
    position: fixed;
    inset: 0;
    z-index: 9999;
    background: transparent;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    cursor: pointer;
    animation: overlayOut 0.35s ease 4.0s both;
}

@keyframes overlayOut {
    from {
        opacity: 1;
        pointer-events: all;
    }

    to {
        opacity: 0;
        pointer-events: none;
    }
}

/* ── Black rip-halves (the background) ───────────────────── */
.rip-half {
    position: absolute;
    inset: 0;
    background: #000;
    z-index: 3;
}

.rip-left {
    clip-path: polygon(0 0, 51.5% 0, 48.5% 100%, 0 100%);
    transform-origin: left center;
    /* Violent, sudden rip */
    animation: ripLeft 0.25s cubic-bezier(1, 0, 0.8, 1) 2.7s both;
}

.rip-right {
    clip-path: polygon(51.5% 0, 100% 0, 100% 100%, 48.5% 100%);
    transform-origin: right center;
    /* Violent, sudden rip */
    animation: ripRight 0.25s cubic-bezier(1, 0, 0.8, 1) 2.7s both;
}

@keyframes ripLeft {
    0% {
        transform: translateX(0) translateY(0) rotate(0deg);
    }

    20% {
        transform: translateX(-5%) translateY(-2%) rotate(-1deg);
    }

    100% {
        transform: translateX(-108%) translateY(-5%) rotate(-6deg);
    }
}

@keyframes ripRight {
    0% {
        transform: translateX(0) translateY(0) rotate(0deg);
    }

    20% {
        transform: translateX(5%) translateY(2%) rotate(1deg);
    }

    100% {
        transform: translateX(108%) translateY(5%) rotate(6deg);
    }
}

/* ── Demon (Trace Image) ──────────────────────────────────── */
/* The user wants the image completely static in the center,
   blended into the black background, showing ONLY neon red lines. */
.demon-wrap {
    position: absolute;
    /* absolute center */
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 5;
    display: flex;
    align-items: center;
    justify-content: center;
}

.sukuna-trace {
    width: clamp(300px, 65vw, 900px);
    height: auto;
    display: block;
    user-select: none;
    pointer-events: none;

    filter: url(#sukunaRedFilter);

    /* Screen blend mode ensures only the red lines show, black becomes transparent */
    mix-blend-mode: screen;

    /* Aggressive mask to erase the background slashes/splashes 
       drawn on the original image, leaving only the center character visible */
    -webkit-mask-image: radial-gradient(circle 35% at 50% 50%,
            rgba(0, 0, 0, 1) 20%,
            rgba(0, 0, 0, 0) 45%);
    mask-image: radial-gradient(circle 35% at 50% 50%,
            rgba(0, 0, 0, 1) 20%,
            rgba(0, 0, 0, 0) 45%);

    /* Fades out when the final strikes finish */
    animation: traceOut 0.15s ease 2.6s both;
}

@keyframes traceOut {
    to {
        opacity: 0;
        filter: blur(10px);
    }
}

/* ── Scattered Mini-Slashes Layer ─────────────────────────── */
.mini-slash-layer {
    position: absolute;
    inset: 0;
    z-index: 6;
    pointer-events: none;
    overflow: hidden;
}

.mini-slash {
    position: absolute;
    height: 4px;
    /* Thinner due to increased quantity */
    border-radius: 50%;
    /* Makes it a sharp, tapered sliver instead of a block */
    background: linear-gradient(90deg,
            transparent 0%,
            #7a0011 20%,
            #ff0000 50%,
            #7a0011 80%,
            transparent 100%);
    box-shadow: 0 0 4px 1px #ff0000;
    opacity: 0;
    transform-origin: center center;
    animation-name: miniSlashAnim;
    animation-timing-function: ease-out;
    animation-fill-mode: both;
}

@keyframes miniSlashAnim {
    0% {
        opacity: 0;
        transform: var(--rot) scaleX(0);
    }

    15% {
        opacity: 1;
    }

    50% {
        transform: var(--rot) scaleX(1);
        opacity: 1;
    }

    100% {
        transform: var(--rot) scaleX(1.5);
        opacity: 0;
    }
}


/* ── Massive Main Slash Layer ─────────────────────────────── */
.slash-layer {
    position: absolute;
    inset: 0;
    z-index: 6;
    pointer-events: none;
    overflow: hidden;
}

/* Base slash — MASSIVE, sharp, tapered sword cuts */
.slash {
    position: absolute;
    left: -100%;
    right: -100%;
    border-radius: 50%;
    /* Creates the sharp tapering at the edges of the blade */
    background: linear-gradient(90deg,
            transparent 0%,
            #3b0008 15%,
            #dc143c 35%,
            #ff0000 50%,
            #dc143c 65%,
            #3b0008 85%,
            transparent 100%);
    box-shadow:
        0 0 8px 1px #ff0000,
        0 0 16px 4px #dc143caa;
    opacity: 0;
    transform-origin: left center;
}

/* ── Wave 1 — instant brutal entrance 0.0–0.25s ── */
.sl-1 {
    top: 28%;
    height: 14px;
    animation: slashA 0.2s ease-out 0.00s both;
}

.sl-2 {
    top: 36%;
    height: 6px;
    animation: slashB 0.15s ease-out 0.05s both;
}

.sl-3 {
    top: 60%;
    height: 10px;
    animation: slashC 0.2s ease-out 0.1s both;
}

/* ── Wave 2 — violent cross-slashes 0.3–0.5s ── */
.sl-4 {
    top: 15%;
    height: 8px;
    animation: slashD 0.18s ease-out 0.28s both;
}

.sl-5 {
    top: 75%;
    height: 12px;
    animation: slashE 0.22s ease-out 0.4s both;
}

/* ── Wave 3 — crushing domain set strikes 1.3–1.6s ── */
.sl-6 {
    top: 44%;
    height: 22px;
    /* Thicker and more brutal */
    animation: slashF 0.25s ease-out 1.30s both;
}

.sl-7 {
    top: 52%;
    height: 8px;
    animation: slashG 0.18s ease-out 1.45s both;
}

/* Each slash has its own keyframe to bake in the rotation */
@keyframes slashA {
    0% {
        opacity: 0;
        transform: rotate(-22deg) scaleX(0);
    }

    8% {
        opacity: 1;
    }

    45% {
        transform: rotate(-22deg) scaleX(1);
        opacity: 1;
    }

    100% {
        transform: rotate(-22deg) scaleX(1);
        opacity: 0;
    }
}

@keyframes slashB {
    0% {
        opacity: 0;
        transform: rotate(-20deg) scaleX(0);
    }

    8% {
        opacity: 1;
    }

    45% {
        transform: rotate(-20deg) scaleX(1);
        opacity: 0.8;
    }

    100% {
        transform: rotate(-20deg) scaleX(1);
        opacity: 0;
    }
}

@keyframes slashC {
    0% {
        opacity: 0;
        transform: rotate(16deg) scaleX(0);
        transform-origin: right center;
    }

    8% {
        opacity: 1;
    }

    45% {
        transform: rotate(16deg) scaleX(1);
        opacity: 1;
        transform-origin: right center;
    }

    100% {
        transform: rotate(16deg) scaleX(1);
        opacity: 0;
        transform-origin: right center;
    }
}

@keyframes slashD {
    0% {
        opacity: 0;
        transform: rotate(-35deg) scaleX(0);
    }

    8% {
        opacity: 1;
    }

    45% {
        transform: rotate(-35deg) scaleX(1);
        opacity: 1;
    }

    100% {
        transform: rotate(-35deg) scaleX(1);
        opacity: 0;
    }
}

@keyframes slashE {
    0% {
        opacity: 0;
        transform: rotate(20deg) scaleX(0);
        transform-origin: right center;
    }

    8% {
        opacity: 1;
    }

    45% {
        transform: rotate(20deg) scaleX(1);
        opacity: 1;
        transform-origin: right center;
    }

    100% {
        transform: rotate(20deg) scaleX(1);
        opacity: 0;
        transform-origin: right center;
    }
}

@keyframes slashF {
    0% {
        opacity: 0;
        transform: rotate(-12deg) scaleX(0);
    }

    5% {
        opacity: 1;
    }

    35% {
        transform: rotate(-12deg) scaleX(1);
        opacity: 1;
    }

    100% {
        transform: rotate(-12deg) scaleX(1);
        opacity: 0;
    }
}

@keyframes slashG {
    0% {
        opacity: 0;
        transform: rotate(-12deg) scaleX(0);
    }

    8% {
        opacity: 1;
    }

    45% {
        transform: rotate(-12deg) scaleX(1);
        opacity: 0.8;
    }

    100% {
        transform: rotate(-12deg) scaleX(1);
        opacity: 0;
    }
}

/* ── Red crack seam ────────────────────────────────────────── */
.rip-seam {
    position: absolute;
    top: 0;
    bottom: 0;
    left: calc(50% - 1px);
    width: 2px;
    background: linear-gradient(to bottom, transparent 0%, #dc143c 20%, #ff4060 50%, #dc143c 80%, transparent 100%);
    box-shadow: 0 0 10px 4px #dc143c99;
    /* Slightly brighter for the tear */
    z-index: 6;
    opacity: 0;
    /* Much faster seam glow and fade to match violent rip */
    animation: seamGlow 0.15s ease-in 2.5s both, seamFade 0.1s ease-in 2.65s both;
}

@keyframes seamGlow {
    from {
        opacity: 0;
        transform: scaleY(0);
    }

    to {
        opacity: 1;
        transform: scaleY(1.2);
        /* Slight over-extension for impact */
    }
}

@keyframes seamFade {
    to {
        opacity: 0;
    }
}

/* ── Skip ─────────────────────────────────────────────────── */
.intro-skip {
    position: absolute;
    bottom: 2rem;
    right: 2rem;
    z-index: 10;
    background: transparent;
    border: 1px solid rgba(220, 20, 60, 0.15);
    color: rgba(255, 255, 255, 0.18);
    font-family: 'Poppins', 'Inter', sans-serif;
    font-size: 0.52rem;
    font-weight: 500;
    letter-spacing: 4px;
    text-transform: uppercase;
    padding: 0.32rem 0.9rem;
    border-radius: 1px;
    cursor: pointer;
    opacity: 0;
    animation: skipIn 0.35s ease 0.5s both;
    transition: color 0.15s, border-color 0.15s;
}

.intro-skip:hover,
.intro-skip:focus {
    color: #dc143c;
    border-color: rgba(220, 20, 60, 0.6);
    outline: none;
}

@keyframes skipIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

/* ── Reduced motion ───────────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {

    .mini-slash-layer,
    .slash-layer {
        display: none;
    }

    .sukuna-trace {
        animation: traceOut 0.1s ease 0.6s both;
    }

    .rip-left {
        animation: ripLeft 0.1s ease 0.5s both;
    }

    .rip-right {
        animation: ripRight 0.1s ease 0.5s both;
    }

    .rip-seam {
        animation: seamGlow 0.05s ease 0.45s both, seamFade 0.05s ease 0.6s both;
    }

    .intro-overlay {
        animation: overlayOut 0.2s ease 0.7s both;
    }

    .intro-skip {
        animation: none !important;
        opacity: 1 !important;
    }
}